import{s as Qe,x as $e,y as we,g as v,c as B,l as X,h as g,i as I,d as N,m as Z,K as De,k as b,L as xe,e as fe,f as We,M as Xe,n as he}from"../chunks/scheduler.6f08bd49.js";import{S as Ze,i as et,d as U,z as ce,v as tt,j as ue,k as de,e as m,g as d,a as K,m as me,u as r,t as se,c as nt,b as oe,l as _e,D as lt,h as st,r as ot,s as le}from"../chunks/index.23aed9fc.js";import{H as ze}from"../chunks/HomeButton.92991326.js";import{S as Fe}from"../chunks/SunnyTitle.190692db.js";import{_ as Ve,R as Ae,k as Re,b as Be,c as Ne,u as at,a as rt,f as pe,d as Te}from"../chunks/firebase.f8e160ab.js";import{p as ve}from"../chunks/stores.f1232561.js";import{g as Ce}from"../chunks/navigation.497fbd53.js";import{t as je}from"../chunks/stores.f0f78671.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.45dd88ad.js";import{F as Oe}from"../chunks/FileButton.b454bbeb.js";import{P as qe}from"../chunks/ProgressRadial.aa447f3f.js";import{I as it}from"../chunks/Icon.024dd230.js";const k="src/routes/[userId]/+page.svelte";function Me(s,e,n){const l=s.slice();return l[11]=e[n],l}function Pe(s,e,n){const l=s.slice();return l[11]=e[n],l}function He(s){let e,n,l=s[11].structurized_text.title+"",t,o,a;const i={c:function(){e=v("a"),n=v("div"),t=X(l),o=B(),this.h()},l:function(c){e=g(c,"A",{href:!0,class:!0});var _=I(e);n=g(_,"DIV",{class:!0});var y=I(n);t=Z(y,l),y.forEach(m),o=N(_),_.forEach(m),this.h()},h:function(){d(n,"class","font-extrabold text-lg"),b(n,k,79,5,2468),d(e,"href",a=`notes/image/${s[11].id}`),d(e,"class","card block card-hover p-4 rounded-xl"),b(e,k,78,4,2380)},m:function(c,_){K(c,e,_),r(e,n),r(n,t),r(e,o)},p:function(c,_){_&4&&l!==(l=c[11].structurized_text.title+"")&&le(t,l),_&4&&a!==(a=`notes/image/${c[11].id}`)&&d(e,"href",a)},d:function(c){c&&m(e)}};return U("SvelteRegisterBlock",{block:i,id:He.name,type:"else",source:"(68:3) {:else}",ctx:s}),i}function Le(s){let e,n,l,t,o,a;const i={c:function(){e=v("div"),n=v("div"),l=v("div"),t=B(),o=v("div"),a=B(),this.h()},l:function(c){e=g(c,"DIV",{class:!0});var _=I(e);n=g(_,"DIV",{class:!0});var y=I(n);l=g(y,"DIV",{class:!0}),I(l).forEach(m),t=N(y),o=g(y,"DIV",{class:!0}),I(o).forEach(m),y.forEach(m),a=N(_),_.forEach(m),this.h()},h:function(){d(l,"class","placeholder animate-pulse w-24"),b(l,k,73,6,2242),d(o,"class","placeholder animate-pulse w-24"),b(o,k,74,6,2295),d(n,"class","p-4 space-y-3"),b(n,k,72,5,2208),d(e,"class","card block card-hover p-4 rounded-xl"),b(e,k,71,4,2152)},m:function(c,_){K(c,e,_),r(e,n),r(n,l),r(n,t),r(n,o),r(e,a)},p:he,d:function(c){c&&m(e)}};return U("SvelteRegisterBlock",{block:i,id:Le.name,type:"if",source:"(61:3) {#if imgDoc == 0}",ctx:s}),i}function ge(s){let e;function n(a,i){return a[11]==0?Le:He}let l=n(s),t=l(s);const o={c:function(){t.c(),e=fe()},l:function(i){t.l(i),e=fe()},m:function(i,u){t.m(i,u),K(i,e,u)},p:function(i,u){l===(l=n(i))&&t?t.p(i,u):(t.d(1),t=l(i),t&&(t.c(),t.m(e.parentNode,e)))},d:function(i){i&&m(e),t.d(i)}};return U("SvelteRegisterBlock",{block:o,id:ge.name,type:"each",source:"(60:2) {#each notes as imgDoc}",ctx:s}),o}function Ue(s){let e,n,l,t,o,a=re(s[11].uploadTime)[0]+"",i,u,c,_=re(s[11].uploadTime)[1]+"",y,$,f,V,A=s[11].structurized_text.title+"",C,p,F,Y=s[11].structurized_text.location+"",z,ne,H,P=ye(s[11].uploadTime)+"",Q,O,T;const M={c:function(){e=v("a"),n=v("dl"),l=v("div"),t=v("div"),o=v("div"),i=X(a),u=B(),c=v("div"),y=X(_),$=B(),f=v("span"),V=v("dt"),C=X(A),p=B(),F=v("dd"),z=X(Y),ne=B(),H=v("dd"),Q=X(P),O=B(),this.h()},l:function(R){e=g(R,"A",{href:!0});var D=I(e);n=g(D,"DL",{class:!0});var G=I(n);l=g(G,"DIV",{class:!0});var w=I(l);t=g(w,"DIV",{class:!0});var ee=I(t);o=g(ee,"DIV",{class:!0});var L=I(o);i=Z(L,a),L.forEach(m),u=N(ee),c=g(ee,"DIV",{class:!0});var ae=I(c);y=Z(ae,_),ae.forEach(m),ee.forEach(m),$=N(w),f=g(w,"SPAN",{class:!0});var J=I(f);V=g(J,"DT",{class:!0});var x=I(V);C=Z(x,A),x.forEach(m),p=N(J),F=g(J,"DD",{class:!0});var h=I(F);z=Z(h,Y),h.forEach(m),ne=N(J),H=g(J,"DD",{class:!0});var E=I(H);Q=Z(E,P),E.forEach(m),J.forEach(m),w.forEach(m),G.forEach(m),O=N(D),D.forEach(m),this.h()},h:function(){d(o,"class","font-bold"),b(o,k,104,8,3296),d(c,"class","font-bold"),b(c,k,105,8,3371),d(t,"class","flex flex-col rounded-xl border-2 p-2 px-4 justify-center items-center"),b(t,k,103,7,3202),d(V,"class","font-extrabold text-lg"),b(V,k,108,8,3491),d(F,"class","text-sm"),b(F,k,109,8,3573),d(H,"class","text-sm"),b(H,k,110,8,3643),d(f,"class","flex-auto"),b(f,k,107,7,3458),d(l,"class","flex space-x-4"),b(l,k,102,6,3166),d(n,"class","flex w-80"),b(n,k,101,5,3137),d(e,"href",T=`events/image/${s[11].id}`),b(e,k,100,4,3093)},m:function(R,D){K(R,e,D),r(e,n),r(n,l),r(l,t),r(t,o),r(o,i),r(t,u),r(t,c),r(c,y),r(l,$),r(l,f),r(f,V),r(V,C),r(f,p),r(f,F),r(F,z),r(f,ne),r(f,H),r(H,Q),r(e,O)},p:function(R,D){D&8&&a!==(a=re(R[11].uploadTime)[0]+"")&&le(i,a),D&8&&_!==(_=re(R[11].uploadTime)[1]+"")&&le(y,_),D&8&&A!==(A=R[11].structurized_text.title+"")&&le(C,A),D&8&&Y!==(Y=R[11].structurized_text.location+"")&&le(z,Y),D&8&&P!==(P=ye(R[11].uploadTime)+"")&&le(Q,P),D&8&&T!==(T=`events/image/${R[11].id}`)&&d(e,"href",T)},d:function(R){R&&m(e)}};return U("SvelteRegisterBlock",{block:M,id:Ue.name,type:"else",source:"(90:3) {:else}",ctx:s}),M}function Ke(s){let e,n,l,t,o,a;const i={c:function(){e=v("div"),n=v("div"),l=v("div"),t=B(),o=v("div"),a=B(),this.h()},l:function(c){e=g(c,"DIV",{class:!0});var _=I(e);n=g(_,"DIV",{class:!0});var y=I(n);l=g(y,"DIV",{class:!0}),I(l).forEach(m),t=N(y),o=g(y,"DIV",{class:!0}),I(o).forEach(m),y.forEach(m),a=N(_),_.forEach(m),this.h()},h:function(){d(l,"class","placeholder animate-pulse w-24"),b(l,k,95,6,2955),d(o,"class","placeholder animate-pulse w-24"),b(o,k,96,6,3008),d(n,"class","p-4 space-y-4"),b(n,k,94,5,2921),d(e,"class","card block card-hover p-4 rounded-xl"),b(e,k,93,4,2865)},m:function(c,_){K(c,e,_),r(e,n),r(n,l),r(n,t),r(n,o),r(e,a)},p:he,d:function(c){c&&m(e)}};return U("SvelteRegisterBlock",{block:i,id:Ke.name,type:"if",source:"(83:3) {#if imgDoc == 0}",ctx:s}),i}function be(s){let e;function n(a,i){return a[11]==0?Ke:Ue}let l=n(s),t=l(s);const o={c:function(){t.c(),e=fe()},l:function(i){t.l(i),e=fe()},m:function(i,u){t.m(i,u),K(i,e,u)},p:function(i,u){l===(l=n(i))&&t?t.p(i,u):(t.d(1),t=l(i),t&&(t.c(),t.m(e.parentNode,e)))},d:function(i){i&&m(e),t.d(i)}};return U("SvelteRegisterBlock",{block:o,id:be.name,type:"each",source:"(82:2) {#each events as imgDoc}",ctx:s}),o}function Ye(s){let e,n,l,t,o="Add Audio",a,i,u;function c($){s[7]($)}let _={name:"files",button:"variant-filled-primary ",class:"btn variant-filled-primary rounded-xl font-extrabold w-64 p-1",$$slots:{default:[Je]},$$scope:{ctx:s}};s[0]!==void 0&&(_.files=s[0]),e=new Oe({props:_,$$inline:!0}),We.push(()=>lt(e,"files",c));const y={c:function(){ue(e.$$.fragment),l=B(),t=v("button"),t.textContent=o,this.h()},l:function(f){de(e.$$.fragment,f),l=N(f),t=g(f,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),De(t)!=="svelte-fftm5e"&&(t.textContent=o),this.h()},h:function(){d(t,"type","button"),d(t,"class","btn p-3 variant-filled-secondary text-2xl rounded-xl font-extrabold w-64"),b(t,k,130,3,4196)},m:function(f,V){me(e,f,V),K(f,l,V),K(f,t,V),a=!0,i||(u=ot(t,"click",s[8],!1,!1,!1,!1),i=!0)},p:function(f,V){const A={};V&65536&&(A.$$scope={dirty:V,ctx:f}),!n&&V&1&&(n=!0,A.files=f[0],Xe(()=>n=!1)),e.$set(A)},i:function(f){a||(oe(e.$$.fragment,f),a=!0)},o:function(f){se(e.$$.fragment,f),a=!1},d:function(f){f&&(m(l),m(t)),_e(e,f),i=!1,u()}};return U("SvelteRegisterBlock",{block:y,id:Ye.name,type:"else",source:"(113:2) {:else}",ctx:s}),y}function Ge(s){let e,n;e=new qe({props:{stroke:100,meter:"stroke-primary-500",track:"stroke-primary-500/30"},$$inline:!0});const l={c:function(){ue(e.$$.fragment)},l:function(o){de(e.$$.fragment,o)},m:function(o,a){me(e,o,a),n=!0},p:he,i:function(o){n||(oe(e.$$.fragment,o),n=!0)},o:function(o){se(e.$$.fragment,o),n=!1},d:function(o){_e(e,o)}};return U("SvelteRegisterBlock",{block:l,id:Ge.name,type:"if",source:"(111:2) {#if pressAction}",ctx:s}),l}function Je(s){let e,n="Add Picture";const l={c:function(){e=v("p"),e.textContent=n,this.h()},l:function(o){e=g(o,"P",{class:!0,"data-svelte-h":!0}),De(e)!=="svelte-nlfkcs"&&(e.textContent=n),this.h()},h:function(){d(e,"class","text-2xl"),b(e,k,128,5,4139)},m:function(o,a){K(o,e,a)},p:he,d:function(o){o&&m(e)}};return U("SvelteRegisterBlock",{block:l,id:Je.name,type:"slot",source:'(114:3) <FileButton     bind:files     name=\\"files\\"     button=\\"variant-filled-primary \\"     class=\\"btn variant-filled-primary rounded-xl font-extrabold w-64 p-1\\"     >',ctx:s}),l}function ke(s){let e,n,l,t,o,a,i,u,c,_,y,$,f,V,A,C,p,F,Y,z,ne="Events",H,P,Q,O,T,M,q;n=new Fe({props:{actionName:"Notes"},$$inline:!0}),t=new ze({$$inline:!0});let R=ce(s[2]),D=[];for(let x=0;x<R.length;x+=1)D[x]=ge(Pe(s,R,x));let G=ce(s[3]),w=[];for(let x=0;x<G.length;x+=1)w[x]=be(Me(s,G,x));const ee=[Ge,Ye],L=[];function ae(x,h){return x[1]?0:1}T=ae(s),M=L[T]=ee[T](s);const J={c:function(){e=v("main"),ue(n.$$.fragment),l=B(),ue(t.$$.fragment),o=B(),a=v("div"),i=B(),u=v("div"),c=v("a"),_=X("More Notes"),$=B(),f=v("section");for(let h=0;h<D.length;h+=1)D[h].c();V=B(),A=v("div"),C=v("a"),p=X("More Events"),Y=B(),z=v("h1"),z.textContent=ne,H=B(),P=v("section");for(let h=0;h<w.length;h+=1)w[h].c();Q=B(),O=v("div"),M.c(),this.h()},l:function(h){e=g(h,"MAIN",{class:!0});var E=I(e);de(n.$$.fragment,E),l=N(E),de(t.$$.fragment,E),o=N(E),a=g(E,"DIV",{class:!0}),I(a).forEach(m),i=N(E),u=g(E,"DIV",{class:!0});var j=I(u);c=g(j,"A",{href:!0,class:!0});var S=I(c);_=Z(S,"More Notes"),S.forEach(m),j.forEach(m),$=N(E),f=g(E,"SECTION",{class:!0});var W=I(f);for(let te=0;te<D.length;te+=1)D[te].l(W);W.forEach(m),V=N(E),A=g(E,"DIV",{class:!0});var ie=I(A);C=g(ie,"A",{href:!0,class:!0});var Ee=I(C);p=Z(Ee,"More Events"),Ee.forEach(m),Y=N(ie),z=g(ie,"H1",{class:!0,"data-svelte-h":!0}),De(z)!=="svelte-14bg11t"&&(z.textContent=ne),ie.forEach(m),H=N(E),P=g(E,"SECTION",{class:!0});var Ie=I(P);for(let te=0;te<w.length;te+=1)w[te].l(Ie);Ie.forEach(m),Q=N(E),O=g(E,"DIV",{class:!0});var Se=I(O);M.l(Se),Se.forEach(m),E.forEach(m),this.h()},h:function(){d(a,"class","h-28"),b(a,k,63,1,1907),d(c,"href",y=`/notes/${s[4].params.userId}`),d(c,"class","underline"),b(c,k,66,2,1970),d(u,"class","w-full flex justify-end"),b(u,k,65,1,1930),d(f,"class","grid grid-cols-2 gap-4 mt-4"),b(f,k,68,1,2055),d(C,"href",F=`/events/${s[4].params.userId}`),d(C,"class","underline"),b(C,k,86,2,2644),d(z,"class","h1 text-4xl"),b(z,k,87,2,2724),d(A,"class","w-full flex justify-between items-end mt-8"),b(A,k,85,1,2585),d(P,"class","flex flex-col mt-6 gap-4"),b(P,k,90,1,2770),d(O,"class","flex-grow flex flex-col space-y-3 items-center my-6"),b(O,k,119,1,3787),d(e,"class","container h-screen bg-surface-900 relative flex flex-col justify-start items-center px-8"),b(e,k,58,0,1748)},m:function(h,E){K(h,e,E),me(n,e,null),r(e,l),me(t,e,null),r(e,o),r(e,a),r(e,i),r(e,u),r(u,c),r(c,_),r(e,$),r(e,f);for(let j=0;j<D.length;j+=1)D[j]&&D[j].m(f,null);r(e,V),r(e,A),r(A,C),r(C,p),r(A,Y),r(A,z),r(e,H),r(e,P);for(let j=0;j<w.length;j+=1)w[j]&&w[j].m(P,null);r(e,Q),r(e,O),L[T].m(O,null),q=!0},p:function(h,[E]){if((!q||E&16&&y!==(y=`/notes/${h[4].params.userId}`))&&d(c,"href",y),E&4){R=ce(h[2]);let S;for(S=0;S<R.length;S+=1){const W=Pe(h,R,S);D[S]?D[S].p(W,E):(D[S]=ge(W),D[S].c(),D[S].m(f,null))}for(;S<D.length;S+=1)D[S].d(1);D.length=R.length}if((!q||E&16&&F!==(F=`/events/${h[4].params.userId}`))&&d(C,"href",F),E&8){G=ce(h[3]);let S;for(S=0;S<G.length;S+=1){const W=Me(h,G,S);w[S]?w[S].p(W,E):(w[S]=be(W),w[S].c(),w[S].m(P,null))}for(;S<w.length;S+=1)w[S].d(1);w.length=G.length}let j=T;T=ae(h),T===j?L[T].p(h,E):(st(),se(L[j],1,1,()=>{L[j]=null}),nt(),M=L[T],M?M.p(h,E):(M=L[T]=ee[T](h),M.c()),oe(M,1),M.m(O,null))},i:function(h){q||(oe(n.$$.fragment,h),oe(t.$$.fragment,h),oe(M),q=!0)},o:function(h){se(n.$$.fragment,h),se(t.$$.fragment,h),se(M),q=!1},d:function(h){h&&m(e),_e(n),_e(t),xe(D,h),xe(w,h),L[T].d()}};return U("SvelteRegisterBlock",{block:J,id:ke.name,type:"component",source:"",ctx:s}),J}function ye(s){const e=new Date(s),n=e.getFullYear(),l=String(e.getMonth()+1).padStart(2,"0"),t=String(e.getDate()).padStart(2,"0");return`${n}-${l}-${t}`}function re(s){const e=new Date(s);String(e.getMonth()+1).padStart(2,"0");const n=String(e.getDate()).padStart(2,"0");return[new Intl.DateTimeFormat("en-US",{month:"short"}).format(e),n]}function ct(s,e,n){let l,t,o,a;$e(ve,"page"),we(s,ve,p=>n(4,a=p));let{$$slots:i={},$$scope:u}=e;tt("Page",i,[]);const c=Ve(pe,"images"),_=Ae(c,Be("userId","==",a.params.userId),Re(4)),y=Ne(pe,_);$e(y,"images"),we(s,y,p=>n(6,o=p));let $,f=!1;const V=[];Object.keys(e).forEach(p=>{!~V.indexOf(p)&&p.slice(0,2)!=="$$"&&p!=="slot"&&console.warn(`<Page> was created with unknown prop '${p}'`)});function A(p){$=p,n(0,$)}const C=()=>{je.trigger({message:"not yet implemented 🫠😭"})};return s.$capture_state=()=>({HomeButton:ze,SunnyTitle:Fe,collectionStore:Ne,userStore:at,auth:rt,firestore:pe,uploadImg:Te,collection:Ve,where:Be,query:Ae,limit:Re,page:ve,goto:Ce,FileButton:Oe,ProgressRadial:qe,toastStore:je,Icon:it,imagesRef:c,q:_,images:y,files:$,pressAction:f,formatTimestamp:ye,getMonthDate:re,notes:t,events:l,$images:o,$page:a}),s.$inject_state=p=>{"files"in p&&n(0,$=p.files),"pressAction"in p&&n(1,f=p.pressAction),"notes"in p&&n(2,t=p.notes),"events"in p&&n(3,l=p.events)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),s.$$.update=()=>{s.$$.dirty&1&&$&&$.length>0&&(Te($).then(p=>{Ce(`/processing/${p}`)}),n(1,f=!0)),s.$$.dirty&64&&n(3,l=[...o.filter(p=>p.category=="events"),...Array(2).fill(0)].slice(0,2)),s.$$.dirty&64&&n(2,t=[...o.filter(p=>p.category=="notes"),...Array(4).fill(0)].slice(0,4))},[$,f,t,l,a,y,o,A,C]}class Dt extends Ze{constructor(e){super(e),et(this,e,ct,ke,Qe,{}),U("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:ke.name})}}export{Dt as component};
