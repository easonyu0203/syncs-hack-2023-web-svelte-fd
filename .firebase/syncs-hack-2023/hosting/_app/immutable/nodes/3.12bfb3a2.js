import{s as Qe,x as Ie,y as $e,g,c as N,l as X,h as b,i as E,d as T,m as Z,K as De,k,L as xe,e as fe,f as We,M as Xe,n as he}from"../chunks/scheduler.078b4462.js";import{S as Ze,i as et,d as U,z as ce,v as tt,j as ue,k as de,e as m,g as u,a as K,m as me,u as i,t as oe,c as nt,b as se,l as _e,D as lt,h as ot,r as st,s as le}from"../chunks/index.0492f3ae.js";import{g as at}from"../chunks/globals.7f7f1b26.js";import{H as ze}from"../chunks/HomeButton.febfff0a.js";import{S as Fe}from"../chunks/SunnyTitle.72634ef1.js";import{_ as Ae,R as Re,k as Ve,b as Be,c as Ne,u as rt,a as it,f as pe,d as Te}from"../chunks/firebase.aa651bd7.js";import{p as ve}from"../chunks/stores.b53e8de9.js";import{g as Ce}from"../chunks/navigation.f9bd9e9b.js";import{t as je}from"../chunks/stores.3a99b166.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.75326b71.js";import{F as Oe}from"../chunks/FileButton.9fc5bcaa.js";import{P as qe}from"../chunks/ProgressRadial.b732b1fd.js";import{I as ct}from"../chunks/Icon.4ca51455.js";const{console:ft}=at,y="src/routes/[userId]/+page.svelte";function Me(o,e,n){const l=o.slice();return l[11]=e[n],l}function Pe(o,e,n){const l=o.slice();return l[11]=e[n],l}function He(o){let e,n,l=o[11].structurized_text.title+"",t,r,s;const a={c:function(){e=g("a"),n=g("div"),t=X(l),r=N(),this.h()},l:function(d){e=b(d,"A",{href:!0,class:!0});var S=E(e);n=b(S,"DIV",{class:!0});var R=E(n);t=Z(R,l),R.forEach(m),r=T(S),S.forEach(m),this.h()},h:function(){u(n,"class","font-bold text-sm"),k(n,y,82,5,2520),u(e,"href",s=`notes/image/${o[11].id}`),u(e,"class","card card-hover p-4 rounded-xl flex justify-between flex-col"),k(e,y,78,4,2393)},m:function(d,S){K(d,e,S),i(e,n),i(n,t),i(e,r)},p:function(d,S){S&4&&l!==(l=d[11].structurized_text.title+"")&&le(t,l),S&4&&s!==(s=`notes/image/${d[11].id}`)&&u(e,"href",s)},d:function(d){d&&m(e)}};return U("SvelteRegisterBlock",{block:a,id:He.name,type:"else",source:"(68:3) {:else}",ctx:o}),a}function Le(o){let e,n,l,t;const r={c:function(){e=g("div"),n=g("div"),l=g("div"),t=N(),this.h()},l:function(a){e=b(a,"DIV",{class:!0});var c=E(e);n=b(c,"DIV",{class:!0});var d=E(n);l=b(d,"DIV",{class:!0}),E(l).forEach(m),d.forEach(m),t=T(c),c.forEach(m),this.h()},h:function(){u(l,"class","placeholder animate-pulse w-24"),k(l,y,74,6,2308),u(n,"class","p-4 space-y-3"),k(n,y,73,5,2274),u(e,"class","card block card-hover p-4 rounded-xl"),k(e,y,72,4,2218)},m:function(a,c){K(a,e,c),i(e,n),i(n,l),i(e,t)},p:he,d:function(a){a&&m(e)}};return U("SvelteRegisterBlock",{block:r,id:Le.name,type:"if",source:"(62:3) {#if imgDoc == 0}",ctx:o}),r}function ge(o){let e;function n(s,a){return s[11]==0?Le:He}let l=n(o),t=l(o);const r={c:function(){t.c(),e=fe()},l:function(a){t.l(a),e=fe()},m:function(a,c){t.m(a,c),K(a,e,c)},p:function(a,c){l===(l=n(a))&&t?t.p(a,c):(t.d(1),t=l(a),t&&(t.c(),t.m(e.parentNode,e)))},d:function(a){a&&m(e),t.d(a)}};return U("SvelteRegisterBlock",{block:r,id:ge.name,type:"each",source:"(61:2) {#each notes as imgDoc}",ctx:o}),r}function Ue(o){let e,n,l,t,r,s=re(o[11].uploadTime)[0]+"",a,c,d,S=re(o[11].uploadTime)[1]+"",R,w,f,x,A=o[11].structurized_text.title+"",C,h,F,Y=o[11].structurized_text.location+"",z,ne,H,P=ye(o[11].uploadTime)+"",Q,O,B;const M={c:function(){e=g("a"),n=g("dl"),l=g("div"),t=g("div"),r=g("div"),a=X(s),c=N(),d=g("div"),R=X(S),w=N(),f=g("span"),x=g("dt"),C=X(A),h=N(),F=g("dd"),z=X(Y),ne=N(),H=g("dd"),Q=X(P),O=N(),this.h()},l:function(V){e=b(V,"A",{href:!0});var p=E(e);n=b(p,"DL",{class:!0});var G=E(n);l=b(G,"DIV",{class:!0});var I=E(l);t=b(I,"DIV",{class:!0});var ee=E(t);r=b(ee,"DIV",{class:!0});var L=E(r);a=Z(L,s),L.forEach(m),c=T(ee),d=b(ee,"DIV",{class:!0});var ae=E(d);R=Z(ae,S),ae.forEach(m),ee.forEach(m),w=T(I),f=b(I,"SPAN",{class:!0});var J=E(f);x=b(J,"DT",{class:!0});var $=E(x);C=Z($,A),$.forEach(m),h=T(J),F=b(J,"DD",{class:!0});var _=E(F);z=Z(_,Y),_.forEach(m),ne=T(J),H=b(J,"DD",{class:!0});var v=E(H);Q=Z(v,P),v.forEach(m),J.forEach(m),I.forEach(m),G.forEach(m),O=T(p),p.forEach(m),this.h()},h:function(){u(r,"class","font-bold text-sm"),k(r,y,109,8,3448),u(d,"class","font-bold text-sm"),k(d,y,110,8,3531),u(t,"class","flex flex-col rounded-xl border-2 p-2 px-4 justify-center items-center"),k(t,y,108,7,3354),u(x,"class","font-extrabold"),k(x,y,113,8,3659),u(F,"class","text-sm"),k(F,y,114,8,3733),u(H,"class","text-sm"),k(H,y,115,8,3803),u(f,"class","flex-auto"),k(f,y,112,7,3626),u(l,"class","flex space-x-3"),k(l,y,107,6,3318),u(n,"class","flex w-80"),k(n,y,106,5,3289),u(e,"href",B=`events/image/${o[11].id}`),k(e,y,105,4,3245)},m:function(V,p){K(V,e,p),i(e,n),i(n,l),i(l,t),i(t,r),i(r,a),i(t,c),i(t,d),i(d,R),i(l,w),i(l,f),i(f,x),i(x,C),i(f,h),i(f,F),i(F,z),i(f,ne),i(f,H),i(H,Q),i(e,O)},p:function(V,p){p&8&&s!==(s=re(V[11].uploadTime)[0]+"")&&le(a,s),p&8&&S!==(S=re(V[11].uploadTime)[1]+"")&&le(R,S),p&8&&A!==(A=V[11].structurized_text.title+"")&&le(C,A),p&8&&Y!==(Y=V[11].structurized_text.location+"")&&le(z,Y),p&8&&P!==(P=ye(V[11].uploadTime)+"")&&le(Q,P),p&8&&B!==(B=`events/image/${V[11].id}`)&&u(e,"href",B)},d:function(V){V&&m(e)}};return U("SvelteRegisterBlock",{block:M,id:Ue.name,type:"else",source:"(95:3) {:else}",ctx:o}),M}function Ke(o){let e,n,l,t;const r={c:function(){e=g("div"),n=g("div"),l=g("div"),t=N(),this.h()},l:function(a){e=b(a,"DIV",{class:!0});var c=E(e);n=b(c,"DIV",{class:!0});var d=E(n);l=b(d,"DIV",{class:!0}),E(l).forEach(m),d.forEach(m),t=T(c),c.forEach(m),this.h()},h:function(){u(l,"class","placeholder animate-pulse w-24"),k(l,y,101,6,3160),u(n,"class","p-4 space-y-4 w-64"),k(n,y,100,5,3121),u(e,"class","card block card-hover p-4 rounded-xl"),k(e,y,99,4,3065)},m:function(a,c){K(a,e,c),i(e,n),i(n,l),i(e,t)},p:he,d:function(a){a&&m(e)}};return U("SvelteRegisterBlock",{block:r,id:Ke.name,type:"if",source:"(89:3) {#if imgDoc == 0}",ctx:o}),r}function be(o){let e;function n(s,a){return s[11]==0?Ke:Ue}let l=n(o),t=l(o);const r={c:function(){t.c(),e=fe()},l:function(a){t.l(a),e=fe()},m:function(a,c){t.m(a,c),K(a,e,c)},p:function(a,c){l===(l=n(a))&&t?t.p(a,c):(t.d(1),t=l(a),t&&(t.c(),t.m(e.parentNode,e)))},d:function(a){a&&m(e),t.d(a)}};return U("SvelteRegisterBlock",{block:r,id:be.name,type:"each",source:"(88:2) {#each events as imgDoc}",ctx:o}),r}function Ye(o){let e,n,l,t,r="Add Audio",s,a,c;function d(w){o[7](w)}let S={name:"files",button:"variant-filled-primary ",class:"btn variant-filled-primary rounded-xl font-extrabold w-48 p-1",$$slots:{default:[Je]},$$scope:{ctx:o}};o[0]!==void 0&&(S.files=o[0]),e=new Oe({props:S,$$inline:!0}),We.push(()=>lt(e,"files",d));const R={c:function(){ue(e.$$.fragment),l=N(),t=g("button"),t.textContent=r,this.h()},l:function(f){de(e.$$.fragment,f),l=T(f),t=b(f,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),De(t)!=="svelte-11okvni"&&(t.textContent=r),this.h()},h:function(){u(t,"type","button"),u(t,"class","btn p-3 variant-filled-secondary rounded-xl font-extrabold w-48"),k(t,y,135,3,4347)},m:function(f,x){me(e,f,x),K(f,l,x),K(f,t,x),s=!0,a||(c=st(t,"click",o[8],!1,!1,!1,!1),a=!0)},p:function(f,x){const A={};x&65536&&(A.$$scope={dirty:x,ctx:f}),!n&&x&1&&(n=!0,A.files=f[0],Xe(()=>n=!1)),e.$set(A)},i:function(f){s||(se(e.$$.fragment,f),s=!0)},o:function(f){oe(e.$$.fragment,f),s=!1},d:function(f){f&&(m(l),m(t)),_e(e,f),a=!1,c()}};return U("SvelteRegisterBlock",{block:R,id:Ye.name,type:"else",source:"(118:2) {:else}",ctx:o}),R}function Ge(o){let e,n;e=new qe({props:{stroke:100,meter:"stroke-primary-500",track:"stroke-primary-500/30"},$$inline:!0});const l={c:function(){ue(e.$$.fragment)},l:function(r){de(e.$$.fragment,r)},m:function(r,s){me(e,r,s),n=!0},p:he,i:function(r){n||(se(e.$$.fragment,r),n=!0)},o:function(r){oe(e.$$.fragment,r),n=!1},d:function(r){_e(e,r)}};return U("SvelteRegisterBlock",{block:l,id:Ge.name,type:"if",source:"(116:2) {#if pressAction}",ctx:o}),l}function Je(o){let e,n="Add Picture";const l={c:function(){e=g("p"),e.textContent=n,this.h()},l:function(r){e=b(r,"P",{class:!0,"data-svelte-h":!0}),De(e)!=="svelte-1ptid3u"&&(e.textContent=n),this.h()},h:function(){u(e,"class",""),k(e,y,133,5,4299)},m:function(r,s){K(r,e,s)},p:he,d:function(r){r&&m(e)}};return U("SvelteRegisterBlock",{block:l,id:Je.name,type:"slot",source:'(119:3) <FileButton     bind:files     name=\\"files\\"     button=\\"variant-filled-primary \\"     class=\\"btn variant-filled-primary rounded-xl font-extrabold w-48 p-1\\"     >',ctx:o}),l}function ke(o){let e,n,l,t,r,s,a,c,d,S,R,w,f,x,A,C,h,F,Y,z,ne="Events",H,P,Q,O,B,M,q;n=new Fe({props:{actionName:"Notes"},$$inline:!0}),t=new ze({$$inline:!0});let V=ce(o[2]),p=[];for(let $=0;$<V.length;$+=1)p[$]=ge(Pe(o,V,$));let G=ce(o[3]),I=[];for(let $=0;$<G.length;$+=1)I[$]=be(Me(o,G,$));const ee=[Ge,Ye],L=[];function ae($,_){return $[1]?0:1}B=ae(o),M=L[B]=ee[B](o);const J={c:function(){e=g("main"),ue(n.$$.fragment),l=N(),ue(t.$$.fragment),r=N(),s=g("div"),a=N(),c=g("div"),d=g("a"),S=X("More Notes"),w=N(),f=g("section");for(let _=0;_<p.length;_+=1)p[_].c();x=N(),A=g("div"),C=g("a"),h=X("More Events"),Y=N(),z=g("h1"),z.textContent=ne,H=N(),P=g("section");for(let _=0;_<I.length;_+=1)I[_].c();Q=N(),O=g("div"),M.c(),this.h()},l:function(_){e=b(_,"MAIN",{class:!0});var v=E(e);de(n.$$.fragment,v),l=T(v),de(t.$$.fragment,v),r=T(v),s=b(v,"DIV",{class:!0}),E(s).forEach(m),a=T(v),c=b(v,"DIV",{class:!0});var j=E(c);d=b(j,"A",{href:!0,class:!0});var D=E(d);S=Z(D,"More Notes"),D.forEach(m),j.forEach(m),w=T(v),f=b(v,"SECTION",{class:!0});var W=E(f);for(let te=0;te<p.length;te+=1)p[te].l(W);W.forEach(m),x=T(v),A=b(v,"DIV",{class:!0});var ie=E(A);C=b(ie,"A",{href:!0,class:!0});var Ee=E(C);h=Z(Ee,"More Events"),Ee.forEach(m),Y=T(ie),z=b(ie,"H1",{class:!0,"data-svelte-h":!0}),De(z)!=="svelte-1easv1b"&&(z.textContent=ne),ie.forEach(m),H=T(v),P=b(v,"SECTION",{class:!0});var we=E(P);for(let te=0;te<I.length;te+=1)I[te].l(we);we.forEach(m),Q=T(v),O=b(v,"DIV",{class:!0});var Se=E(O);M.l(Se),Se.forEach(m),v.forEach(m),this.h()},h:function(){u(s,"class","w-full h-32 flex-grow-0"),k(s,y,65,1,1935),u(d,"href",R=`/notes/${o[4].params.userId}`),u(d,"class","underline"),k(d,y,67,2,2026),u(c,"class","w-full flex flex-grow justify-end"),k(c,y,66,1,1976),u(f,"class","flex-grow grid grid-cols-2 gap-4 mt-4"),k(f,y,69,1,2111),u(C,"href",F=`/events/${o[4].params.userId}`),u(C,"class","underline"),k(C,y,92,2,2834),u(z,"class","h1 text-2xl"),k(z,y,93,2,2914),u(A,"class","flex-grow w-full flex justify-between items-end mt-3"),k(A,y,91,1,2765),u(P,"class","flex-grow flex flex-col mt-6 gap-4"),k(P,y,96,1,2960),u(O,"class","flex-grow flex flex-col space-y-3 items-center my-6"),k(O,y,124,1,3947),u(e,"class","container h-screen bg-surface-900 relative flex flex-col justify-center items-center px-8"),k(e,y,60,0,1775)},m:function(_,v){K(_,e,v),me(n,e,null),i(e,l),me(t,e,null),i(e,r),i(e,s),i(e,a),i(e,c),i(c,d),i(d,S),i(e,w),i(e,f);for(let j=0;j<p.length;j+=1)p[j]&&p[j].m(f,null);i(e,x),i(e,A),i(A,C),i(C,h),i(A,Y),i(A,z),i(e,H),i(e,P);for(let j=0;j<I.length;j+=1)I[j]&&I[j].m(P,null);i(e,Q),i(e,O),L[B].m(O,null),q=!0},p:function(_,[v]){if((!q||v&16&&R!==(R=`/notes/${_[4].params.userId}`))&&u(d,"href",R),v&4){V=ce(_[2]);let D;for(D=0;D<V.length;D+=1){const W=Pe(_,V,D);p[D]?p[D].p(W,v):(p[D]=ge(W),p[D].c(),p[D].m(f,null))}for(;D<p.length;D+=1)p[D].d(1);p.length=V.length}if((!q||v&16&&F!==(F=`/events/${_[4].params.userId}`))&&u(C,"href",F),v&8){G=ce(_[3]);let D;for(D=0;D<G.length;D+=1){const W=Me(_,G,D);I[D]?I[D].p(W,v):(I[D]=be(W),I[D].c(),I[D].m(P,null))}for(;D<I.length;D+=1)I[D].d(1);I.length=G.length}let j=B;B=ae(_),B===j?L[B].p(_,v):(ot(),oe(L[j],1,1,()=>{L[j]=null}),nt(),M=L[B],M?M.p(_,v):(M=L[B]=ee[B](_),M.c()),se(M,1),M.m(O,null))},i:function(_){q||(se(n.$$.fragment,_),se(t.$$.fragment,_),se(M),q=!0)},o:function(_){oe(n.$$.fragment,_),oe(t.$$.fragment,_),oe(M),q=!1},d:function(_){_&&m(e),_e(n),_e(t),xe(p,_),xe(I,_),L[B].d()}};return U("SvelteRegisterBlock",{block:J,id:ke.name,type:"component",source:"",ctx:o}),J}function ye(o){const e=new Date(o),n=e.getFullYear(),l=String(e.getMonth()+1).padStart(2,"0"),t=String(e.getDate()).padStart(2,"0");return`${n}-${l}-${t}`}function re(o){const e=new Date(o);String(e.getMonth()+1).padStart(2,"0");const n=String(e.getDate()).padStart(2,"0");return[new Intl.DateTimeFormat("en-US",{month:"short"}).format(e),n]}function ut(o,e,n){let l,t,r,s;Ie(ve,"page"),$e(o,ve,h=>n(4,s=h));let{$$slots:a={},$$scope:c}=e;tt("Page",a,[]);const d=Ae(pe,"images"),S=Re(d,Be("userId","==",s.params.userId),Ve(4)),R=Ne(pe,S);Ie(R,"images"),$e(o,R,h=>n(6,r=h));let w,f=!1;const x=[];Object.keys(e).forEach(h=>{!~x.indexOf(h)&&h.slice(0,2)!=="$$"&&h!=="slot"&&ft.warn(`<Page> was created with unknown prop '${h}'`)});function A(h){w=h,n(0,w)}const C=()=>{je.trigger({message:"not yet implemented 🫠😭"})};return o.$capture_state=()=>({HomeButton:ze,SunnyTitle:Fe,collectionStore:Ne,userStore:rt,auth:it,firestore:pe,uploadImg:Te,collection:Ae,where:Be,query:Re,limit:Ve,page:ve,goto:Ce,FileButton:Oe,ProgressRadial:qe,toastStore:je,Icon:ct,imagesRef:d,q:S,images:R,files:w,pressAction:f,formatTimestamp:ye,getMonthDate:re,notes:t,events:l,$images:r,$page:s}),o.$inject_state=h=>{"files"in h&&n(0,w=h.files),"pressAction"in h&&n(1,f=h.pressAction),"notes"in h&&n(2,t=h.notes),"events"in h&&n(3,l=h.events)},e&&"$$inject"in e&&o.$inject_state(e.$$inject),o.$$.update=()=>{o.$$.dirty&1&&w&&w.length>0&&(Te(w).then(h=>{Ce(`/processing/${h}`)}),n(1,f=!0)),o.$$.dirty&64&&n(3,l=[...r.filter(h=>h.category=="events"),...Array(2).fill(0)].slice(0,2)),o.$$.dirty&64&&n(2,t=[...r.filter(h=>h.category=="notes"),...Array(4).fill(0)].slice(0,4)),o.$$.dirty&64&&console.log(r)},[w,f,t,l,s,R,r,A,C]}class St extends Ze{constructor(e){super(e),et(this,e,ut,ke,Qe,{}),U("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:ke.name})}}export{St as component};
