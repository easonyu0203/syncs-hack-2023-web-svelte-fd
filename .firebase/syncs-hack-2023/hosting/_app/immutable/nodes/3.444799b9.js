import{s as Qe,x as we,y as $e,g as v,c as B,l as Q,h as g,i as I,d as N,m as W,K as De,k as b,L as xe,e as ue,f as We,M as Xe,n as pe}from"../chunks/scheduler.6f08bd49.js";import{S as Ze,i as et,d as U,z as fe,v as tt,j as de,k as me,e as d,g as u,a as K,m as _e,u as i,t as se,c as nt,b as oe,l as he,D as lt,h as st,r as ot,s as ne}from"../chunks/index.23aed9fc.js";import{g as at}from"../chunks/globals.7f7f1b26.js";import{H as ze}from"../chunks/HomeButton.92991326.js";import{S as Fe}from"../chunks/SunnyTitle.190692db.js";import{_ as Ve,R as Te,k as Ae,b as Re,c as Be,u as rt,a as it,f as ve,d as Ne}from"../chunks/firebase.adfd6ce4.js";import{p as ge}from"../chunks/stores.3f9f2865.js";import{g as Ce}from"../chunks/navigation.dd553de8.js";import{t as je}from"../chunks/stores.f0f78671.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.45dd88ad.js";import{F as Oe}from"../chunks/FileButton.b454bbeb.js";import{P as qe}from"../chunks/ProgressRadial.aa447f3f.js";import{I as ct}from"../chunks/Icon.024dd230.js";const{console:ft}=at,k="src/routes/[userId]/+page.svelte";function Me(s,e,n){const l=s.slice();return l[11]=e[n],l}function Pe(s,e,n){const l=s.slice();return l[11]=e[n],l}function He(s){let e,n,l=s[11].structurized_text.title+"",t,o,a,r,f=ie(s[11].uploadTime)+"",m,x,$;const S={c:function(){e=v("a"),n=v("div"),t=Q(l),o=B(),a=v("div"),r=v("dd"),m=Q(f),x=B(),this.h()},l:function(y){e=g(y,"A",{href:!0,class:!0});var p=I(e);n=g(p,"DIV",{class:!0});var A=I(n);t=W(A,l),A.forEach(d),o=N(p),a=g(p,"DIV",{class:!0});var _=I(a);r=g(_,"DD",{class:!0});var M=I(r);m=W(M,f),M.forEach(d),_.forEach(d),x=N(p),p.forEach(d),this.h()},h:function(){u(n,"class","font-extrabold text-lg"),b(n,k,83,5,2534),u(r,"class","text-sm"),b(r,k,85,6,2658),u(a,"class","w-full flex justify-end"),b(a,k,84,5,2614),u(e,"href",$=`notes/image/${s[11].id}`),u(e,"class","card card-hover p-4 rounded-xl flex justify-between flex-col"),b(e,k,79,4,2407)},m:function(y,p){K(y,e,p),i(e,n),i(n,t),i(e,o),i(e,a),i(a,r),i(r,m),i(e,x)},p:function(y,p){p&4&&l!==(l=y[11].structurized_text.title+"")&&ne(t,l),p&4&&f!==(f=ie(y[11].uploadTime)+"")&&ne(m,f),p&4&&$!==($=`notes/image/${y[11].id}`)&&u(e,"href",$)},d:function(y){y&&d(e)}};return U("SvelteRegisterBlock",{block:S,id:He.name,type:"else",source:"(69:3) {:else}",ctx:s}),S}function Le(s){let e,n,l,t,o,a;const r={c:function(){e=v("div"),n=v("div"),l=v("div"),t=B(),o=v("div"),a=B(),this.h()},l:function(m){e=g(m,"DIV",{class:!0});var x=I(e);n=g(x,"DIV",{class:!0});var $=I(n);l=g($,"DIV",{class:!0}),I(l).forEach(d),t=N($),o=g($,"DIV",{class:!0}),I(o).forEach(d),$.forEach(d),a=N(x),x.forEach(d),this.h()},h:function(){u(l,"class","placeholder animate-pulse w-24"),b(l,k,74,6,2269),u(o,"class","placeholder animate-pulse w-24"),b(o,k,75,6,2322),u(n,"class","p-4 space-y-3"),b(n,k,73,5,2235),u(e,"class","card block card-hover p-4 rounded-xl"),b(e,k,72,4,2179)},m:function(m,x){K(m,e,x),i(e,n),i(n,l),i(n,t),i(n,o),i(e,a)},p:pe,d:function(m){m&&d(e)}};return U("SvelteRegisterBlock",{block:r,id:Le.name,type:"if",source:"(62:3) {#if imgDoc == 0}",ctx:s}),r}function be(s){let e;function n(a,r){return a[11]==0?Le:He}let l=n(s),t=l(s);const o={c:function(){t.c(),e=ue()},l:function(r){t.l(r),e=ue()},m:function(r,f){t.m(r,f),K(r,e,f)},p:function(r,f){l===(l=n(r))&&t?t.p(r,f):(t.d(1),t=l(r),t&&(t.c(),t.m(e.parentNode,e)))},d:function(r){r&&d(e),t.d(r)}};return U("SvelteRegisterBlock",{block:o,id:be.name,type:"each",source:"(61:2) {#each notes as imgDoc}",ctx:s}),o}function Ue(s){let e,n,l,t,o,a=re(s[11].uploadTime)[0]+"",r,f,m,x=re(s[11].uploadTime)[1]+"",$,S,c,y,p=s[11].structurized_text.title+"",A,_,M,Y=s[11].structurized_text.location+"",F,le,H,z=ie(s[11].uploadTime)+"",X,O,C;const P={c:function(){e=v("a"),n=v("dl"),l=v("div"),t=v("div"),o=v("div"),r=Q(a),f=B(),m=v("div"),$=Q(x),S=B(),c=v("span"),y=v("dt"),A=Q(p),_=B(),M=v("dd"),F=Q(Y),le=B(),H=v("dd"),X=Q(z),O=B(),this.h()},l:function(R){e=g(R,"A",{href:!0});var D=I(e);n=g(D,"DL",{class:!0});var G=I(n);l=g(G,"DIV",{class:!0});var V=I(l);t=g(V,"DIV",{class:!0});var ee=I(t);o=g(ee,"DIV",{class:!0});var L=I(o);r=W(L,a),L.forEach(d),f=N(ee),m=g(ee,"DIV",{class:!0});var ae=I(m);$=W(ae,x),ae.forEach(d),ee.forEach(d),S=N(V),c=g(V,"SPAN",{class:!0});var J=I(c);y=g(J,"DT",{class:!0});var T=I(y);A=W(T,p),T.forEach(d),_=N(J),M=g(J,"DD",{class:!0});var h=I(M);F=W(h,Y),h.forEach(d),le=N(J),H=g(J,"DD",{class:!0});var E=I(H);X=W(E,z),E.forEach(d),J.forEach(d),V.forEach(d),G.forEach(d),O=N(D),D.forEach(d),this.h()},h:function(){u(o,"class","font-bold"),b(o,k,110,8,3438),u(m,"class","font-bold"),b(m,k,111,8,3513),u(t,"class","flex flex-col rounded-xl border-2 p-2 px-4 justify-center items-center"),b(t,k,109,7,3344),u(y,"class","font-extrabold text-lg"),b(y,k,114,8,3633),u(M,"class","text-sm"),b(M,k,115,8,3715),u(H,"class","text-sm"),b(H,k,116,8,3785),u(c,"class","flex-auto"),b(c,k,113,7,3600),u(l,"class","flex space-x-4"),b(l,k,108,6,3308),u(n,"class","flex w-80"),b(n,k,107,5,3279),u(e,"href",C=`events/image/${s[11].id}`),b(e,k,106,4,3235)},m:function(R,D){K(R,e,D),i(e,n),i(n,l),i(l,t),i(t,o),i(o,r),i(t,f),i(t,m),i(m,$),i(l,S),i(l,c),i(c,y),i(y,A),i(c,_),i(c,M),i(M,F),i(c,le),i(c,H),i(H,X),i(e,O)},p:function(R,D){D&8&&a!==(a=re(R[11].uploadTime)[0]+"")&&ne(r,a),D&8&&x!==(x=re(R[11].uploadTime)[1]+"")&&ne($,x),D&8&&p!==(p=R[11].structurized_text.title+"")&&ne(A,p),D&8&&Y!==(Y=R[11].structurized_text.location+"")&&ne(F,Y),D&8&&z!==(z=ie(R[11].uploadTime)+"")&&ne(X,z),D&8&&C!==(C=`events/image/${R[11].id}`)&&u(e,"href",C)},d:function(R){R&&d(e)}};return U("SvelteRegisterBlock",{block:P,id:Ue.name,type:"else",source:"(96:3) {:else}",ctx:s}),P}function Ke(s){let e,n,l,t;const o={c:function(){e=v("div"),n=v("div"),l=v("div"),t=B(),this.h()},l:function(r){e=g(r,"DIV",{class:!0});var f=I(e);n=g(f,"DIV",{class:!0});var m=I(n);l=g(m,"DIV",{class:!0}),I(l).forEach(d),m.forEach(d),t=N(f),f.forEach(d),this.h()},h:function(){u(l,"class","placeholder animate-pulse w-24"),b(l,k,102,6,3150),u(n,"class","p-4 space-y-4 w-64"),b(n,k,101,5,3111),u(e,"class","card block card-hover p-4 rounded-xl"),b(e,k,100,4,3055)},m:function(r,f){K(r,e,f),i(e,n),i(n,l),i(e,t)},p:pe,d:function(r){r&&d(e)}};return U("SvelteRegisterBlock",{block:o,id:Ke.name,type:"if",source:"(90:3) {#if imgDoc == 0}",ctx:s}),o}function ke(s){let e;function n(a,r){return a[11]==0?Ke:Ue}let l=n(s),t=l(s);const o={c:function(){t.c(),e=ue()},l:function(r){t.l(r),e=ue()},m:function(r,f){t.m(r,f),K(r,e,f)},p:function(r,f){l===(l=n(r))&&t?t.p(r,f):(t.d(1),t=l(r),t&&(t.c(),t.m(e.parentNode,e)))},d:function(r){r&&d(e),t.d(r)}};return U("SvelteRegisterBlock",{block:o,id:ke.name,type:"each",source:"(89:2) {#each events as imgDoc}",ctx:s}),o}function Ye(s){let e,n,l,t,o="Add Audio",a,r,f;function m(S){s[7](S)}let x={name:"files",button:"variant-filled-primary ",class:"btn variant-filled-primary rounded-xl font-extrabold w-64 p-1",$$slots:{default:[Je]},$$scope:{ctx:s}};s[0]!==void 0&&(x.files=s[0]),e=new Oe({props:x,$$inline:!0}),We.push(()=>lt(e,"files",m));const $={c:function(){de(e.$$.fragment),l=B(),t=v("button"),t.textContent=o,this.h()},l:function(c){me(e.$$.fragment,c),l=N(c),t=g(c,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),De(t)!=="svelte-fftm5e"&&(t.textContent=o),this.h()},h:function(){u(t,"type","button"),u(t,"class","btn p-3 variant-filled-secondary text-2xl rounded-xl font-extrabold w-64"),b(t,k,136,3,4338)},m:function(c,y){_e(e,c,y),K(c,l,y),K(c,t,y),a=!0,r||(f=ot(t,"click",s[8],!1,!1,!1,!1),r=!0)},p:function(c,y){const p={};y&65536&&(p.$$scope={dirty:y,ctx:c}),!n&&y&1&&(n=!0,p.files=c[0],Xe(()=>n=!1)),e.$set(p)},i:function(c){a||(oe(e.$$.fragment,c),a=!0)},o:function(c){se(e.$$.fragment,c),a=!1},d:function(c){c&&(d(l),d(t)),he(e,c),r=!1,f()}};return U("SvelteRegisterBlock",{block:$,id:Ye.name,type:"else",source:"(119:2) {:else}",ctx:s}),$}function Ge(s){let e,n;e=new qe({props:{stroke:100,meter:"stroke-primary-500",track:"stroke-primary-500/30"},$$inline:!0});const l={c:function(){de(e.$$.fragment)},l:function(o){me(e.$$.fragment,o)},m:function(o,a){_e(e,o,a),n=!0},p:pe,i:function(o){n||(oe(e.$$.fragment,o),n=!0)},o:function(o){se(e.$$.fragment,o),n=!1},d:function(o){he(e,o)}};return U("SvelteRegisterBlock",{block:l,id:Ge.name,type:"if",source:"(117:2) {#if pressAction}",ctx:s}),l}function Je(s){let e,n="Add Picture";const l={c:function(){e=v("p"),e.textContent=n,this.h()},l:function(o){e=g(o,"P",{class:!0,"data-svelte-h":!0}),De(e)!=="svelte-nlfkcs"&&(e.textContent=n),this.h()},h:function(){u(e,"class","text-2xl"),b(e,k,134,5,4281)},m:function(o,a){K(o,e,a)},p:pe,d:function(o){o&&d(e)}};return U("SvelteRegisterBlock",{block:l,id:Je.name,type:"slot",source:'(120:3) <FileButton     bind:files     name=\\"files\\"     button=\\"variant-filled-primary \\"     class=\\"btn variant-filled-primary rounded-xl font-extrabold w-64 p-1\\"     >',ctx:s}),l}function ye(s){let e,n,l,t,o,a,r,f,m,x,$,S,c,y,p,A,_,M,Y,F,le="Events",H,z,X,O,C,P,q;n=new Fe({props:{actionName:"Notes"},$$inline:!0}),t=new ze({$$inline:!0});let R=fe(s[2]),D=[];for(let T=0;T<R.length;T+=1)D[T]=be(Pe(s,R,T));let G=fe(s[3]),V=[];for(let T=0;T<G.length;T+=1)V[T]=ke(Me(s,G,T));const ee=[Ge,Ye],L=[];function ae(T,h){return T[1]?0:1}C=ae(s),P=L[C]=ee[C](s);const J={c:function(){e=v("main"),de(n.$$.fragment),l=B(),de(t.$$.fragment),o=B(),a=v("div"),r=B(),f=v("div"),m=v("a"),x=Q("More Notes"),S=B(),c=v("section");for(let h=0;h<D.length;h+=1)D[h].c();y=B(),p=v("div"),A=v("a"),_=Q("More Events"),Y=B(),F=v("h1"),F.textContent=le,H=B(),z=v("section");for(let h=0;h<V.length;h+=1)V[h].c();X=B(),O=v("div"),P.c(),this.h()},l:function(h){e=g(h,"MAIN",{class:!0});var E=I(e);me(n.$$.fragment,E),l=N(E),me(t.$$.fragment,E),o=N(E),a=g(E,"DIV",{class:!0}),I(a).forEach(d),r=N(E),f=g(E,"DIV",{class:!0});var j=I(f);m=g(j,"A",{href:!0,class:!0});var w=I(m);x=W(w,"More Notes"),w.forEach(d),j.forEach(d),S=N(E),c=g(E,"SECTION",{class:!0});var Z=I(c);for(let te=0;te<D.length;te+=1)D[te].l(Z);Z.forEach(d),y=N(E),p=g(E,"DIV",{class:!0});var ce=I(p);A=g(ce,"A",{href:!0,class:!0});var Ee=I(A);_=W(Ee,"More Events"),Ee.forEach(d),Y=N(ce),F=g(ce,"H1",{class:!0,"data-svelte-h":!0}),De(F)!=="svelte-14bg11t"&&(F.textContent=le),ce.forEach(d),H=N(E),z=g(E,"SECTION",{class:!0});var Ie=I(z);for(let te=0;te<V.length;te+=1)V[te].l(Ie);Ie.forEach(d),X=N(E),O=g(E,"DIV",{class:!0});var Se=I(O);P.l(Se),Se.forEach(d),E.forEach(d),this.h()},h:function(){u(a,"class","h-80"),b(a,k,65,1,1934),u(m,"href",$=`/notes/${s[4].params.userId}`),u(m,"class","underline"),b(m,k,67,2,1997),u(f,"class","w-full flex justify-end"),b(f,k,66,1,1957),u(c,"class","grid grid-cols-2 gap-4 mt-4"),b(c,k,69,1,2082),u(A,"href",M=`/events/${s[4].params.userId}`),u(A,"class","underline"),b(A,k,93,2,2834),u(F,"class","h1 text-4xl"),b(F,k,94,2,2914),u(p,"class","w-full flex justify-between items-end mt-8"),b(p,k,92,1,2775),u(z,"class","flex flex-col mt-6 gap-4"),b(z,k,97,1,2960),u(O,"class","flex-grow flex flex-col space-y-3 items-center my-6"),b(O,k,125,1,3929),u(e,"class","container h-screen bg-surface-900 relative flex flex-col justify-start items-center px-8"),b(e,k,60,0,1775)},m:function(h,E){K(h,e,E),_e(n,e,null),i(e,l),_e(t,e,null),i(e,o),i(e,a),i(e,r),i(e,f),i(f,m),i(m,x),i(e,S),i(e,c);for(let j=0;j<D.length;j+=1)D[j]&&D[j].m(c,null);i(e,y),i(e,p),i(p,A),i(A,_),i(p,Y),i(p,F),i(e,H),i(e,z);for(let j=0;j<V.length;j+=1)V[j]&&V[j].m(z,null);i(e,X),i(e,O),L[C].m(O,null),q=!0},p:function(h,[E]){if((!q||E&16&&$!==($=`/notes/${h[4].params.userId}`))&&u(m,"href",$),E&4){R=fe(h[2]);let w;for(w=0;w<R.length;w+=1){const Z=Pe(h,R,w);D[w]?D[w].p(Z,E):(D[w]=be(Z),D[w].c(),D[w].m(c,null))}for(;w<D.length;w+=1)D[w].d(1);D.length=R.length}if((!q||E&16&&M!==(M=`/events/${h[4].params.userId}`))&&u(A,"href",M),E&8){G=fe(h[3]);let w;for(w=0;w<G.length;w+=1){const Z=Me(h,G,w);V[w]?V[w].p(Z,E):(V[w]=ke(Z),V[w].c(),V[w].m(z,null))}for(;w<V.length;w+=1)V[w].d(1);V.length=G.length}let j=C;C=ae(h),C===j?L[C].p(h,E):(st(),se(L[j],1,1,()=>{L[j]=null}),nt(),P=L[C],P?P.p(h,E):(P=L[C]=ee[C](h),P.c()),oe(P,1),P.m(O,null))},i:function(h){q||(oe(n.$$.fragment,h),oe(t.$$.fragment,h),oe(P),q=!0)},o:function(h){se(n.$$.fragment,h),se(t.$$.fragment,h),se(P),q=!1},d:function(h){h&&d(e),he(n),he(t),xe(D,h),xe(V,h),L[C].d()}};return U("SvelteRegisterBlock",{block:J,id:ye.name,type:"component",source:"",ctx:s}),J}function ie(s){const e=new Date(s),n=e.getFullYear(),l=String(e.getMonth()+1).padStart(2,"0"),t=String(e.getDate()).padStart(2,"0");return`${n}-${l}-${t}`}function re(s){const e=new Date(s);String(e.getMonth()+1).padStart(2,"0");const n=String(e.getDate()).padStart(2,"0");return[new Intl.DateTimeFormat("en-US",{month:"short"}).format(e),n]}function ut(s,e,n){let l,t,o,a;we(ge,"page"),$e(s,ge,_=>n(4,a=_));let{$$slots:r={},$$scope:f}=e;tt("Page",r,[]);const m=Ve(ve,"images"),x=Te(m,Re("userId","==",a.params.userId),Ae(4)),$=Be(ve,x);we($,"images"),$e(s,$,_=>n(6,o=_));let S,c=!1;const y=[];Object.keys(e).forEach(_=>{!~y.indexOf(_)&&_.slice(0,2)!=="$$"&&_!=="slot"&&ft.warn(`<Page> was created with unknown prop '${_}'`)});function p(_){S=_,n(0,S)}const A=()=>{je.trigger({message:"not yet implemented ðŸ« ðŸ˜­"})};return s.$capture_state=()=>({HomeButton:ze,SunnyTitle:Fe,collectionStore:Be,userStore:rt,auth:it,firestore:ve,uploadImg:Ne,collection:Ve,where:Re,query:Te,limit:Ae,page:ge,goto:Ce,FileButton:Oe,ProgressRadial:qe,toastStore:je,Icon:ct,imagesRef:m,q:x,images:$,files:S,pressAction:c,formatTimestamp:ie,getMonthDate:re,notes:t,events:l,$images:o,$page:a}),s.$inject_state=_=>{"files"in _&&n(0,S=_.files),"pressAction"in _&&n(1,c=_.pressAction),"notes"in _&&n(2,t=_.notes),"events"in _&&n(3,l=_.events)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),s.$$.update=()=>{s.$$.dirty&1&&S&&S.length>0&&(Ne(S).then(_=>{Ce(`/processing/${_}`)}),n(1,c=!0)),s.$$.dirty&64&&n(3,l=[...o.filter(_=>_.category=="events"),...Array(2).fill(0)].slice(0,2)),s.$$.dirty&64&&n(2,t=[...o.filter(_=>_.category=="notes"),...Array(4).fill(0)].slice(0,4)),s.$$.dirty&64&&console.log(o)},[S,c,t,l,a,$,o,p,A]}class St extends Ze{constructor(e){super(e),et(this,e,ut,ye,Qe,{}),U("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:ye.name})}}export{St as component};
